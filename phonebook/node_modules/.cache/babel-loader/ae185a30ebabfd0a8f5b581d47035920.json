{"ast":null,"code":"import _slicedToArray from\"/home/kakashi/Desktop/full-stack-open-2021/part-2/phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import NumberService from'./services/Numbers';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),successMessage=_useState8[0],setSuccessMessage=_useState8[1];useEffect(function(){NumberService.getAll().then(function(response){setPersons(response);console.log(response);});},[]);var addName=function addName(event){event.preventDefault();var names=persons.map(function(person){return person.name;});console.log(names);if(names.includes(newName)){alert(\"\".concat(newName,\" is already added to phonebook\"));}else{console.log('you clicked',event.target);var nameObject={name:newName,number:newNumber};NumberService.create(nameObject).then(function(response){setPersons(persons.concat(response));setSuccessMessage(\"Added \".concat(nameObject.name));setNewName('');setNewNumber('');});setTimeout(function(){setSuccessMessage(null);},5000);}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);console.log(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);console.log(event.target.value);};var handleDelete=function handleDelete(id,name){if(window.confirm(\"do you want to delete \".concat(name))){NumberService.remove(id);}};var nameToShow=persons?persons:persons.filter(function(person){return person.important===true;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:successMessage}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addName:addName,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{nameToShow:nameToShow,remove:handleDelete})]});};export default App;","map":{"version":3,"sources":["/home/kakashi/Desktop/full-stack-open-2021/part-2/phonebook/src/App.js"],"names":["useEffect","useState","PersonForm","Persons","NumberService","Notification","message","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","successMessage","setSuccessMessage","getAll","then","response","console","log","addName","event","preventDefault","names","map","person","name","includes","alert","target","nameObject","number","create","concat","setTimeout","handleNameChange","value","handleNumberChange","handleDelete","id","window","confirm","remove","nameToShow","filter","important"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport NumberService from './services/Numbers'\nimport './index.css'\n\n\nconst Notification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n\n  return(\n    <div className=\"success\">\n    {message}\n  </div>\n  )\n}\n\nconst App =() => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState(0)\n  const [ successMessage, setSuccessMessage ] = useState (null)\n\n\n  useEffect(() => {\n    NumberService\n    .getAll()\n    .then(response => {\n      setPersons(response)\n      console.log(response);\n      })\n  }, [])\n\n  const addName = (event) => {\n    event.preventDefault()\n    const names = persons.map(person => person.name)\n    console.log(names);\n  \n    if( names.includes(newName)) {\n      alert(`${newName} is already added to phonebook`)\n    }\n    else{\n      console.log('you clicked', event.target);\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    NumberService\n    .create(nameObject)\n    .then(response => {\n      setPersons(persons.concat(response))\n   setSuccessMessage( `Added ${nameObject.name}`)\n\n      setNewName('')\n    setNewNumber('')\n    })\n    setTimeout(() => {\n      setSuccessMessage(null)\n    },5000)\n    }\n    \n    \n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n    console.log(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n    console.log(event.target.value);\n  }\n\n  const handleDelete = (id, name) => {\n    if(window.confirm(`do you want to delete ${name}`)) {\n      NumberService\n    .remove(id)\n    }\n  }\n\n  const nameToShow = persons\n  ? persons\n  : persons.filter(person=> person.important === true)\n\n\n \n  \n  return(\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={successMessage} />\n\n      <h3>add a new</h3>\n\n      <PersonForm addName={addName} \n        newName={newName} handleNameChange={handleNameChange}\n        newNumber={newNumber} handleNumberChange={handleNumberChange}\n        />\n\n      <h2>Numbers</h2> \n     \n    <Persons nameToShow={nameToShow} remove={handleDelete} />\n    </div>\n  )\n}\n\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}